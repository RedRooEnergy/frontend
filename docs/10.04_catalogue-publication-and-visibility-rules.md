10.04 — Catalogue Publication & Visibility Rules
1. Purpose

This document defines the governed rules controlling when, how, and to whom products are visible within the marketplace catalogue. Catalogue publication is treated as a regulated output, not a dynamic view. Visibility is strictly derived from upstream governance states.

No product is ever visible by default.

2. Governance Doctrine

Visibility is an earned state, not a feature.

Catalogue publication must ensure:

• Only compliant, approved products are visible
• Visibility reflects the system’s authoritative truth
• No UI or API can override governance states
• All visibility decisions are reproducible and auditable

3. Scope

This document governs:

• Catalogue inclusion rules
• Visibility states and transitions
• Buyer-facing exposure controls
• Search and indexing eligibility
• Withdrawal and suspension behaviour

Out of scope:

• Product submission workflow (10.03)
• Promotions and pricing logic (Phase 6)
• Buyer UX design (Phase 13)

4. Catalogue as a Generated Artefact

The catalogue is:

• Generated from validated product records
• Built via deterministic rules
• Reproducible from source data
• Immutable per generation cycle

Real-time, ad-hoc catalogue mutation is prohibited.

5. Eligibility Preconditions

A product is eligible for publication only if:

• Product state is Approved / Active
• Supplier status remains Approved
• All required compliance documents are valid
• Category is active and not deprecated
• Pricing snapshot exists and is locked

Failure of any condition removes eligibility.

6. Visibility States

Each product may exist in one of the following visibility states:

• Hidden — not eligible for publication
• Published — visible to buyers
• Suspended — removed due to governance action
• Archived — retired but retained for audit

Visibility state is derived, not manually set.

7. Publication Process

Catalogue publication occurs via:

• Scheduled generation (batch)
• Explicit governance-triggered regeneration

During generation:

• Eligibility rules are re-evaluated
• Only compliant products are included
• Indexes and search artefacts are rebuilt

Partial publication is prohibited.

8. Buyer Visibility Rules

Buyers may see only products that:

• Are in Published state
• Belong to buyer-eligible jurisdictions
• Satisfy any jurisdictional constraints

No buyer role can see Draft, Pending, Rejected, or Suspended products.

9. Administrative Visibility

Administrators may:

• View all visibility states
• Inspect eligibility failures
• Trigger regeneration (if authorised)

Administrators may not manually publish products.

10. Search & Indexing Controls

Search systems may index only:

• Published products
• Active categories

Search indexing is regenerated with the catalogue.

No direct indexing from raw product tables is permitted.

11. Suspension & Removal

Products are automatically removed from visibility if:

• Supplier approval is revoked
• Compliance expires or is withdrawn
• Category is deprecated
• Pricing snapshot becomes invalid

Removal is immediate on next generation or via emergency governance trigger.

12. Withdrawal Handling

Supplier-initiated withdrawal:

• Allowed only if no active orders exist
• Removes product from future catalogue generations
• Preserves audit and historical order references

Withdrawn products are never deleted.

13. Catalogue Versioning

Each catalogue generation records:

• Generation timestamp
• Included product identifiers
• Governing ruleset version
• Hash of output artefacts

Catalogue versions are immutable and exportable.

14. API Exposure Rules

Catalogue APIs:

• Expose only published products
• Enforce jurisdiction filters
• Deny access to hidden states

Internal APIs may access full state for governance purposes only.

15. Failure & Exception Handling

Catalogue generation failures must:

• Fail atomically
• Preserve last valid catalogue
• Emit audit events
• Block partial updates

Silent degradation is prohibited.

16. Audit & Evidence

For each catalogue generation, the system must record:

• Input rule versions
• Product eligibility decisions
• Inclusion/exclusion reasons
• Output hashes

Records must be regulator-exportable.

17. Extension Interaction Rules

Extensions may:

• Consume catalogue output
• Validate visibility state

Extensions may not:

• Modify visibility rules
• Inject products into catalogue
• Bypass generation logic

18. Status

Status: DRAFT
Phase: 10 — Product & Catalogue Governance

Upstream Dependencies:
• 10.01 — Product & Catalogue Governance Overview
• 10.02 — Category & Attribute Governance System
• 10.03 — Product Submission & Validation Workflow

Downstream Dependencies:
• Phase 11 — Freight, Logistics & Customs
• Phase 13 — Buyer Experience & Order Lifecycle